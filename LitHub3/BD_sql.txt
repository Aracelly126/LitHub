-- Crear la base de datos
CREATE DATABASE Biblioteca;

-- Crear la tabla Usuarios
CREATE TABLE Usuarios (
    CORREO VARCHAR(30) PRIMARY KEY,
    NOMBRE VARCHAR(20),
    APELLIDO VARCHAR(20),
    CLAVE VARCHAR(50),
    PAIS VARCHAR(20),
    FEC_NAC VARCHAR(10),
    TIPO VARCHAR(10) CHECK(TIPO IN ( 'ADMIN', 'AUTOR', 'LECTOR'))
);

-- Insertar un nuevo usuario en la tabla Usuarios
INSERT INTO Usuarios (CORREO, NOMBRE, CLAVE, FEC_NAC, TIPO)
VALUES ('pepito@gmail.com', 'Anuel', 'lruxImViiJZybBeV1xN/zQ==', '05/02/2003', 'ADMIN');


-- Crear la tabla Libros
CREATE TABLE Libros (
    CODIGO VARCHAR(10) PRIMARY KEY,
    CORREO_USU VARCHAR(20) REFERENCES Usuarios(CORREO),
    NOMBRE VARCHAR(50),
    GENERO VARCHAR(20),
    NUM_PAG INT CHECK(NUM_PAG <= 500),
    PRESTADO VARCHAR(2) CHECK(PRESTADO IN ('SI', 'NO'))
);

-- Crear la tabla Favoritos
CREATE TABLE Favoritos (
    CODIGO INT AUTO_INCREMENT PRIMARY KEY,
    CORREO_USU VARCHAR(20) REFERENCES Usuarios(CORREO),
    COD_LIB VARCHAR(10) REFERENCES Libros(CODIGO)
);

-- Crear la tabla Prestamos
CREATE TABLE Prestamos (
    CODIGO INT AUTO_INCREMENT PRIMARY KEY,
    COD_LIB VARCHAR(10) REFERENCES Libros(CODIGO),
    CORREO_USU VARCHAR(20) REFERENCES Usuarios(CORREO),
    FEC_INI VARCHAR(10),
    FEC_DEV VARCHAR(10),
    ESTADO VARCHAR(10) CHECK(ESTADO IN ('DEVUELTO', 'INDEVUELTO'))
);