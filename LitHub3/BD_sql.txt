-- Crear la base de datos
CREATE DATABASE Biblioteca;

-- Crear la tabla Usuarios
CREATE TABLE Usuarios (
    NOMBRE VARCHAR(20) PRIMARY KEY,
    APELLIDO VARCHAR(20),
    CLAVE VARCHAR(50) UNIQUE,
    PAIS VARCHAR(20),
    FEC_NAC VARCHAR(10),
    CORREO VARCHAR(30),
    TIPO VARCHAR(10) CHECK(TIPO IN ( 'ADMIN', 'AUTOR', 'LECTOR'))
);

-- Insertar un nuevo usuario en la tabla Usuarios
INSERT INTO Usuarios (NOMBRE, CLAVE, FEC_NAC, TIPO)
VALUES ('Auel', 'lruxImViiJZybBeV1xN/zQ==', '05/02/2003', 'ADMIN');


-- Crear la tabla Libros
CREATE TABLE Libros (
    CODIGO VARCHAR(10) PRIMARY KEY,
    AUTOR VARCHAR(20) REFERENCES Usuarios(NOMBRE),
    NOMBRE VARCHAR(50),
    GENERO VARCHAR(20),
    NUM_PAG INT CHECK(NUM_PAG <= 500),
    URL_FOTO VARCHAR(10),
    URL_PDF VARCHAR(10)
);

-- Crear la tabla Prestamos
CREATE TABLE Prestamos (
    CODIGO INT AUTO_INCREMENT PRIMARY KEY,
    COD_LIB VARCHAR(10) REFERENCES Libros(CODIGO),
    NOM_USU VARCHAR(20) REFERENCES Usuarios(NOMBRE),
    FEC_INI VARCHAR(10),
    FEC_DEV VARCHAR(10),
    ESTADO VARCHAR(10) CHECK(ESTADO IN ('DEVUELTO', 'INDEVUELTO'))
);